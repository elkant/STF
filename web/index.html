
<!DOCTYPE html>

<html>    
	       <head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta charset="utf-8">
		<title>STF 5.0.0</title>
		<meta name="generator" content="Bootply" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
                <link href="css/mastercss.css" rel="stylesheet">
                
                <link rel="shortcut icon" href="images/logo.png">
                  
		
	<body>
<!-- header -->
<div id="top-nav" class="navbar navbar-inverse navbar-static-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            
        </div>
        <div class="navbar-collapse collapse">
                       

            
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
              
                    <ul id="g-account-menu" class="dropdown-menu" role="menu">
                        <li><a href="#">My Profile</a></li>
                    </ul>
                </li>
          
                
                 <li><a title="Add Widget" id="adduserbutton" data-toggle="modal" href="#userdetails"><i class="glyphicon glyphicon-user"></i><span id="usernamelabel"> Add Username</span></a></li>
                 <li><a title="Add Widget" data-toggle="modal"  id="exportdataanchor2" href="#addWidgetModalreexport"><i class="glyphicon glyphicon-cloud-upload"></i> Re-export all Data</a></li>
                 <li>
                  <a  title="Help" data-toggle="modal" href="#help">
                            <i class="glyphicon glyphicon-question-sign"></i>
                            Help
                        </a></li>
                        <li>
                  <a  title="" id='loginbtn' data-toggle="modal" href="#accesscodemodal"><i class="glyphicon glyphicon-log-in"></i>login</a></li>
                        
                         <li>
     <a  title="" id='summaryrptbtn' data-toggle="modal" href="#summarybtn"><i class="glyphicon glyphicon-stats"></i>EAC Cascade</a>
                         </li>
                         
                         <li>
     <a  title=""  data-toggle="modal" href="#clearsyncbtn">
         <i class="glyphicon glyphicon-remove-circle"></i>clear Synced data</a>
                         </li>
                         
                        <li>
                            <a  title=""  data-toggle="modal" href="#datasavedmodal">.</a>
                        </li>
                        <li>
                            <a href="#" style="display:none;" onclick="closeapp();"><i class="glyphicon glyphicon-lock"></i> Exit</a>
                        </li>
            </ul>
        </div>
        
    </div>
    <!-- /container -->
    
</div>
<!-- /Header -->
    
<!-- Main -->
<div ng-app="stfapp" ng-controller="stfcont"  class="container-fluid">
    <div class="row">
        
        <!-- /col-3 -->
        <div class="col-sm-12">

    
            <stf-version></stf-version>     
  

            <div class="row">
                <!-- center left-->
                <div class="col-md-12">
                    
       <!--show the refresh, export data option and Excel Report option-->

                   <stf-header-directive></stf-header-directive>
                    <hr>

                   

<!------------------------------This are the main form tabs for data entry, data editing and clear synced data-->
                    <div class="panel">
                        <ul class="nav nav-tabs " id="myTab">
                           <li class="newdata col-xs-4"><a href="#dataentry" id="newdatabutton" data-toggle="tab">  <i class="glyphicon glyphicon-plus"></i>New Data</a></li>
                           <li>
                               <a href="#reports" style="display:none;" id="reportsbutton" data-toggle="tab"> 
                                   <i class="glyphicon glyphicon-stats"></i> Report</a>
                           </li> 
                           
                           <li class='col-xs-4'>
                                <a href="#searchdata" data-toggle="tab"> <i class="glyphicon glyphicon-home"></i> Edit Data</a>
                            </li> 
                            
                            <li class=' active col-xs-4'><a href="#searchpatients" data-toggle="tab"> 
                                    <i class="glyphicon glyphicon-search"></i>Search Patients</a>
                            </li> 
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane  well col-md-12" id="dataentry">
                                
                                
 <!---------------------------Main Data entry Form starts here ---------------------->
 
 
 
                    <div class="panel panel-default" style='margin:-18px;'>
                       
                        <div class="panel-body" style="width:100%;">
 
      <form class="form form-vertical" action="#" method="post" style='margin:-12px;' name="stfdataform" id="stfdataform">
                                
                                <table class='table table-hover table-bordered'   >
                               
                               <tr><th style="text-align:center"><b>Enter Outcome Data</b></th></tr>
                                
                                <tr>
                                <td>
                                    <label class="col-xs-6"><font color="red"><b>*</b></font> Dispatch Year </label>
                                    <div class="controls col-xs-6">
                                        
                                        <select ng-model="year"  onchange="getmonth();setvldata();" title="Year when the stfs were dispatched" name="year" id="year" class="form-control col-xs-6" ng-model="year" required >
                         <option value='' >Choose year</option>
                         
                         <option ng-repeat="yr in miaka" value='{{yr}}'>{{yr}}</option>
                          </select>
                                        
           <span ng-show="stfdataform.year.$touched && stfdataform.year.$invalid" class="validation">Year is required.</span>  
           
                                    </div>
                                    </td>
                                    
                                    </tr>
                                    
                
                                    <tr>
                                    <td>
                                    <!----------------------------->
                                    
                                    <label class="col-xs-6"><font color="red"><b>*</b></font> Dispatch Month </label>
                                    
                                    <div class="controls col-xs-6">
                                       <select required ng-model="month" onchange='setvldata();' style="" title="Month when the stfs were dispatched"   name="month" id="month" class="form-control col-xs-6" >
                                       <option value=''>Choose  month</option>
                                             <option ng-repeat=" as in months" value='{{as.id}}'>{{ as.val }}</option>                                           
                                          
                                       </select>
         
           
                                        
                                        <input type="hidden"  name ="rowid" id="rowid"  />
                                    </div>
                                    
                                    </td>
                                    
                                </tr>
                                 
                                        

                                <!------INDICATORS----->
                                 <!----------------------------------------------------------------------------------------->
                                                                 
                                <tr>
                                    <td>
                                        <!----------------------------->

                                        <label class="col-xs-12"><font color="red"><b>*</b></font> CCC NO </label>
                                      </td>

                                </tr><tr><td>
                                        <div class="controls col-xs-12">
                                            <select onchange='loadregimen();' style=""   name="cccno" id="cccno" class="form-control col-xs-6" >
                                                <option value=''>Select year and month</option>                                           
                                             </select>
           <span ng-show="stfdataform.cccno.$touched && stfdataform.cccno.$invalid" class="validation">CCC No is required.</span>  
         
                                        </div>

                                    </td>

                                </tr>
                                
                                <!----------------------------------------------------------------------------------------->
                                  
                                   
                                         
                                  
                                  <!----------------------------------------------------------------------------------------->
                                    
                                    
                                    
                                    <tr class="ficha"><td>

                                        <label class="col-xs-6">Patient contacted</label>

                                        <div class="controls col-xs-6">
                                            <select  style=""   name="patientcontacted" id="patientcontacted" class="form-control col-xs-6" >
                                                <option value=''>Patient contacted</option>                                           
                                               <option ng-repeat="op in yesno" value='{{op}}'>{{op}}</option>                                   

                                            </select>
                                            
                                        </div>

                                    </td>

                                </tr>
                                
                                <!----------------------------------------------------------------------------------------->
                                
                             
                                 <!------------------------------------->
                                    <tr class="fichaartreg" style="display:none;">
                                    <td>

                                        <label class="col-xs-6">Current ART regimen</label>

                                        <div class="controls col-xs-6">
                                            <p    id="artregimen" class="col-xs-6" ></p>
                                            
                                            
                                        </div>

                                    </td>

                                     </tr>
                                
                                <!----------------------------->
                                    <tr class="fichaartreg" style="display:none;" ><td>

                                        <label class="col-xs-6" >Change Current Regimen (optional)</label>

                                        <div class="controls col-xs-6">
                                            <select  style=""   name="firstregimen" id="firstregimen" class="form-control col-xs-6" >
                                                <option value=''>choose regimen</option>                                           
                                                  
                                                  </select>                                            
                                        </div>

                                    </td>
                                </tr>
                                
                                
                                    <!----------------------------->
                                    
                                  <!----------------------------->
                                    <tr class="ficha"><td>

                                        <label class="col-xs-6">Date started Current Regimen</label>

                                        <div class="controls col-xs-6">
                                            <input type="text"  name ="cur_reg_startdate" id="cur_reg_startdate" data-date-end-date="0d" autocomplete="off" class="form-control dates" readonly placeholder="e.g yyyy-mm-dd">
                                            
                                        </div>

                                    </td>

                                </tr>
                                
                                <!----------------------------------------------------------------------------------------->
                                   
                                    
                                  <!----------------------------->
                                    <tr class="ficha"><td>

                                        <label class="col-xs-6">Date started Viremia Clinic</label>

                                        <div class="controls col-xs-6">
                                            <input type="text"  name ="vir_clinic_startdate" id="vir_clinic_startdate" data-date-end-date="0d" autocomplete="off" class="form-control dates" readonly placeholder="e.g yyyy-mm-dd">
                                            
                                        </div>

                                    </td>

                                </tr>
                                
                              
                                 <!----------------------------->
                                    <tr class="ficha"><td>

                                        <label class="col-xs-6">Enrolled in Support Group?</label>

                                        <div class="controls col-xs-6">
                                            <select  style="" onchange="supportgroupdate();"  name="insupportgrp" id="insupportgrp" class="form-control col-xs-6" >
                                                <option value=''>choose option</option>                                           
                                                <option ng-repeat="op1 in yesnona" value='{{op1}}'>{{op1}}</option>                                   
                                   

                                            </select>
                                            
                                        </div>

                                    </td>

                                </tr>
                                
                                <!----------------------------------------------------------------------------------------->
                                
                                
                                 <!----------------------------->
                                    <tr class="ficha supportgrp_enrol_date" style="display: none;"><td>

                                        <label class="col-xs-6">Date Enrolled in Support group</label>

                                        <div class="controls col-xs-6">
                                            <input type="text"  name ="supportgrp_enrol_date" id="supportgrp_enrol_date" data-date-end-date="0d" autocomplete="off" class="form-control dates" readonly placeholder="e.g yyyy-mm-dd">
                                            
                                        </div>

                                    </td>

                                </tr>
                                
                              
                                 <!----------------------------->
                                
                                 
                                
                                
                                    <!----------------------------->
                                    <tr class="ficha"><td>

       <label class="col-xs-6">No. of Enhanced Adherence sessions done before repeat confirmatory VL</label>

                                        <div class="controls col-xs-6">
                                            <select  style=""   name="adherencemonths" id="adherencemonths" class="form-control col-xs-6" >
                                                <option value=''>choose Sessions</option>                                           
                                                <option ng-repeat=" as in adherencesessions" value='{{as.id}}'>{{ as.val  }}</option>                                           
                                           </select>
                                            
                                        </div>

                                    </td>

                                </tr>
                                
                                <!----------------------------------------------------------------------------------------->
                                
                                 <tr class="ficha btn-warning" style="text-align: center;" ><td><label class="col-xs-12">1st VL(Repeat Confirmatory VL)</label></td></tr>
                                
                                    <!----------------------------->
                                    <tr class="ficha"><td>

                                        <label class="col-xs-6">Date VL sample collected</label>

                                        <div class="controls col-xs-6">
                                            <input type="text"  name ="secondsampledate" id="secondsampledate" data-date-end-date="0d" autocomplete="off" class="form-control dates" readonly placeholder="e.g yyyy-mm-dd">
                                            
                                        </div>

                                    </td>

                                </tr>
                                
                                <!----------------------------------------------------------------------------------------->
                                
                                
                                 <!----------------------------------------------------------------------------------------->
                                                                 
                                <tr>
                                    <td>
                                        <!----------------------------->

                                        <label class="col-xs-6"><font color="red"></font>VL sample type</label>

                                        <div class="controls col-xs-6">
                                            <select onchange='fichua();' style=""    name="sampletype" id="sampletype" class="form-control col-xs-6" >
                                                <option value=''>Choose  sample type</option>                                           

                                              <option ng-repeat="st in s_type" value='{{st.val}}'>{{ st.id +'.'+ st.val  }}</option>                                           
                                           


                                            </select>
                                            
                                        </div>

                                    </td>

                                </tr>
                                
                                <!----------------------------------------------------------------------------------------->
                                
                                
                           
                                    <!----------------------------->
                                <tr class="ficha"><td>

                                <label class="col-xs-6">Date VL results received</label>

                                <div class="controls col-xs-6">
                                <input type="text"  name ="repeatconf_results_rec_date" id="repeatconf_results_rec_date" data-date-end-date="0d" autocomplete="off" class="form-control dates" readonly placeholder="e.g yyyy-mm-dd">
                                            
                                </div>

                                </td>

                                </tr>
                                
                                <!----------------------------------------------------------------------------------------->
                                
                                
                                
                                    <!----------------------------->
                            <tr class="" style="display:none;"><td>

                                        <label class="col-xs-6">Reasons Repeat VL Not Collected</label>

                                        <div class="controls col-xs-6">
                                            <select onchange='reasonnoteligible();' style=""   name="noteligible" id="noteligible" class="form-control col-xs-6" >
                                                <option value=''>choose reason</option>                                           
                                                <option value='sample was baseline'>sample was baseline</option>                                           
                                                <option value='sample was a repeat, confirmation or failure'>sample was a repeat, confirmation or failure</option>                                           
                                                <option value='Other'>Other</option>                                     

                                            </select>
                                            
                                        </div>

                                    </td>

                                </tr>
                                
                                <!----------------------------------------------------------------------------------------->
                                
                                  <!----------------------------->
                                    <tr class="ficha"><td>
<div id='otherdiv' style='display:none;'>
                                        <label class="col-xs-6"><font color="red"><b>*</b></font>Other Reasons Repeat VL Sample not Collected</label>

                                        <div class="controls col-xs-6">
                                            <input  style=""   name="noteligibleother" id="noteligibleother" class="form-control col-xs-6" >
                                                                                    

                                         
                                            
                                        </div>
</div>
                                    </td>

                                </tr>
                                
                                <!----------------------------------------------------------------------------------------->
                                
                                   <!----------------------------->
                                <tr class="ficha"><td>

                                        <label class="col-xs-6">VL Results</label>

                                        <div class="controls col-xs-6">
                                            <select onchange="decideactiontaken();explainnonswitch();fichapostswitch();"  style=""   name="secondsampleresults" id="secondsampleresults" class="form-control col-xs-6" >
                                                <option value=''>choose result</option>   
                                               
                                        <option ng-repeat=" v in viral" value='{{v.val}}'>{{ v.val  }}</option>                                           
                                                                          
                                           
                                                  </select>                                            
                                        </div>

                                    </td>

                                </tr>
                                
                                
                                   <!----------------------------->
                               <tr class="ficha"><td>

                                        <label class="col-xs-6">Action taken</label>

                                        <div class="controls col-xs-6">
                                            <select  style="" onchange="ficha1();ficha3();toggleactiontaken_other();explainnonswitch();"  name="actiontaken" id="actiontaken" class="form-control col-xs-6" >
                                                <option value=''>choose action</option> 
                                                <option ng-repeat=" _at in actiontaken " value='{{_at.id}}'>{{_at.val}}</option> 
                                                                                           
                                                
                                                 
                                                
  
                                                  </select>                                            
                                        </div>

                                    </td>
                                </tr>
                                   <!----------------------------->
                                   
                                   
                                    <!----------------------------->
                               <tr class="actiontaken_other" style="display:none;"><td>

                                        <label class="col-xs-6">Specify Other action taken</label>

                                        <div class="controls col-xs-6">
                                            <input  style=""  name="actiontaken_other" id="actiontaken_other" class="form-control col-xs-6" >
                                               
                                                                                           
                                                                                      
                                        </div>

                                    </td>
                                </tr>
                                   <!----------------------------->
                                   
                                   <!----------------------------->
                                    <tr class="ficha ficha1"><td>

                                        <label class="col-xs-6"></font>Second Regimen</label>

                                        <div class="controls col-xs-6">
                                            <select  style=""   name="secondregimen" id="secondregimen" class="form-control col-xs-6" >
                                                <option value=''>choose regimen</option>                                           
                                                <option value='ABC/3TC/NVP'>ABC/3TC/NVP</option>                                           
                                                <option value='ABC/3TC/EFV'>ABC/3TC/EFV</option>                                           
                                                <option value='ABC/3TC/LPV'>ABC/3TC/LPV</option>                                           
                                                <option value='ABC/3TC/ATVr'>ABC/3TC/ATVr</option>                                           
                                                <option value='AZT/3TC/NVP'>AZT/3TC/NVP</option>                                           
                                                <option value='AZT/3TC/EFV'>AZT/3TC/EFV</option>                                           
                                                <option value='AZT/3TC/LPVr'>AZT/3TC/LPVr</option>                                           
                                                <option value='AZT/3TC/ATVr'>AZT/3TC/ATVr</option>                                           
                                                <option value='TDF/3TC/NVP'>TDF/3TC/NVP</option>                                           
                                                <option value='TDF/3TC/LPVr'>TDF/3TC/LPVr</option>                                           
                                                <option value='TDF/3TC/ATVr'>TDF/3TC/ATVr</option> 
                                                <option value='other'>Other Regimens(Specify in Comments)
</option> 
                                                
  
                                                  </select>                                            
                                        </div>

                                    </td>
                                </tr>
                                
                                <tr class="ficha ficha3"><td>

                                        <label class="col-xs-6"></font>Third Regimen</label>

                                        <div class="controls col-xs-6">
                                            <select  style=""   name="thirdregimen" id="thirdregimen" class="form-control col-xs-6" >
                                                
                                               
</option> 
                                                
  
                                                  </select>                                            
                                        </div>

                                    </td>
                                </tr>
                                
                                <tr class="ficha ficha1"><td>

                                        <label class="col-xs-6">Date switched to second Regimen</label>

                                        <div class="controls col-xs-6">
                                            <input type="text"  name ="secondregdate" id="secondregdate" data-date-end-date="0d" autocomplete="off" class="form-control dates" readonly placeholder="e.g yyyy-mm-dd">
                                            
                                        </div>

                                    </td>

                                </tr>
                                
                                 <!----------------------------->
                                   
                                   <!----------------------------->
                               <tr class="repeatconf_notswitched_explained" style="display:none;"><td>

                                        <label class="col-xs-6">Reason for not switching if Repeat VL Detectable</label>

                                        <div class="controls col-xs-6">
                                            <select onchange='otherreasonfornonswitch();'  style=""  name="repeatconf_notswitched_explained" id="repeatconf_notswitched_explained" class="form-control col-xs-6" >
                                               
                                                <option value=''>Choose reason</option>                                           
                                                
                                                <option ng-repeat=" _rs in ns " value='{{_rs.val}}'>{{ _rs.id +"."+ _rs.val}}</option> 
                                                                                           
                                                                                        
                                               
                                              </select>   
                                                
  
                                                                                         
                                        </div>

                                    </td>
                                </tr>
                                   <!----------------------------->
                                   


   <!----------------------------->
                               <tr class="repeatconf_notswitched_other_explained" style="display:none;"><td>

                                        <label class="col-xs-6">Specify Other reason for not switching</label>

                                        <div class="controls col-xs-6">
                                            <input  style=""  name="repeatconf_notswitched_other_explained" id="repeatconf_notswitched_other_explained" class="form-control col-xs-6" >
                                                                                      
                                        </div>

                                    </td>
                                </tr>
<!--____________________________________________________________________________________________________________________________________________________________________________________________-->
                                
                                 <tr class="fichavl2 btn-warning" style="text-align: center;" ><td><label class="col-xs-12">2nd VL(3 month VL post switch)</label></td></tr>
                                
                                    <!----------------------------->    
                                   
                                    
                                     <!----------------------------->
                                    <tr class="fichavl2"><td>

                                        <label class="col-xs-6">No. of Enhanced Adherence sessions done before 3 month post switch VL</label>

                                        <div class="controls col-xs-6">
                                            <select  style=""   name="postswitch_adherencesessions" id="postswitch_adherencesessions" class="form-control col-xs-6" >
                                                <option value=''>choose months</option>                                           
                                                <option ng-repeat=" as in adherencesessions" value='{{as.id}}'>{{ as.val  }}</option>                                           
                                                                                       

                                            </select>
                                            
                                        </div>

                                    </td>

                                </tr>
                                    
                                    <!----------------------------->
                                    <tr class="fichavl2"><td>

                                        <label class="col-xs-6">Date VL sample collected</label>

                                        <div class="controls col-xs-6">
                                            <input type="text"  name ="postswitch_sample_col_date" id="postswitch_sample_col_date" data-date-end-date="0d" autocomplete="off" class="form-control dates" readonly placeholder="e.g yyyy-mm-dd">
                                            
                                        </div>

                                    </td>

                                </tr>
                                
                                <!----------------------------------------------------------------------------------------->
                                
                                
                                 <!----------------------------------------------------------------------------------------->
                                                                 
                                <tr class='fichavl2'>
                                    <td>
                                        <!----------------------------->

                                        <label class="col-xs-6"><font color="red"></font>VL sample type</label>

                                        <div class="controls col-xs-6">
                                            <select style=""    name="postswitch_sampletype" id="postswitch_sampletype" class="form-control col-xs-6" >
                                                <option value=''>Choose  sample type</option>                                           
                      
                                              <option ng-repeat=" sti in s_type" value='{{sti.val}}'>{{ sti.id +'.'+ sti.val  }}</option>                                           
                                           
                                            </select>
                                            
                                        </div>

                                    </td>

                                </tr>
                                
                                <!----------------------------------------------------------------------------------------->
                                
                                
                           
                                    <!----------------------------->
                                <tr class="fichavl2"><td>

                                <label class="col-xs-6">Date VL results received</label>

                                <div class="controls col-xs-6">
                                <input type="text"  name ="postswitch_results_rec_date" id="postswitch_results_rec_date" data-date-end-date="0d" autocomplete="off" class="form-control dates" readonly placeholder="e.g yyyy-mm-dd">
                                            
                                </div>

                                </td>

                                </tr>
                                
                                <!----------------------------------------------------------------------------------------->
                                
								 
                                   <!----------------------------->
                                <tr class="fichavl2"><td>

                                        <label class="col-xs-6">VL Results</label>

                                        <div class="controls col-xs-6">
                                            <select onchange="notsuppressedexplained();"  style=""   name="postswitch_vl_results" id="postswitch_vl_results" class="form-control col-xs-6" >
                                                <option value=''>choose result</option>   
                                               
                                                <option ng-repeat=" v in viral" value='{{v.val}}'>{{ v.val  }}</option>                                           
                                                                    
                                           
                                            </select>                                            
                                        </div>

                                    </td>

                                </tr> 
                                    
                                   
                                    
                                   <!----------------------------->
                                    <tr class="ficha"><td>

                                        <label class="col-xs-6">Client's Final Outcome</label>

                                        <div class="controls col-xs-6">
                                            <select  style="" onchange="togglelasttca();"   name="otheroutcomes" id="otheroutcomes" class="form-control col-xs-6" >
                                                <option value=''>choose outcome</option> 
                                                <option ng-repeat=" _fo in finalo" value='{{_fo.val}}'>{{ _fo.id +'.'+ _fo.val}}</option> 
                                                
                                                  
                                            </select>                                            
                                        </div>

                                    </td>
                                </tr>
                                 
                                
                                 <tr class="lasttca" style="display:none;"><td>

                                        <label class="col-xs-6">Last TCA date</label>

                                        <div class="controls col-xs-6">
                                 <input type="text"  name ="lasttca" id="lasttca" data-date-end-date="0d" autocomplete="off" class="form-control dates" readonly placeholder="e.g yyyy-mm-dd">
                                                </div>

                                    </td>
                                </tr>
                                
                                
                                
                                   
                                    <tr class="fichacomments" style='display:none;'><td>

                                        <label class="col-xs-6"><font color="red"><b>*</b></font>Reason for not suppressing (for unsuppressed clients at 3 VL month post switch)</label>

                                        <div class="controls col-xs-6">
                                            <textarea style="display:none;"   name="comments" id="comments" class="form-control col-xs-6" ></textarea>                                            
                                            <textarea style=""   name="not_suppressed_explained" id="not_suppressed_explained" class="form-control col-xs-6" ></textarea>                                            
                                        </div>

                                    </td>
                                </tr>
                                
                                         </table>
                                <table class="table table-striped table-bordered">
                                       <tr><td colspan="3" class="col-xs-12">               
                                <div class="control-group col-xs-12">
                                        <div class="alert-info">Note: Data is saved at the browser. Please ensure you connect to the internet for exporting to the server</div>
                                   <br/>
                                    <div class="controls">
                                        <button type="submit" id='savebutton' onclick="validateweeklydata();" style="margin-left: 0%;" class="btn-lg btn-success active">
                                            SAVE
                                        </button>
                                        <div class='alert alert-success' id='message' style='display:none;'><button type='button' class='close' data-dismiss='alert'>×</button><span id='actiondone'></span></div>
                                     </div>
                                   
                                    <div class="controls">
                                        <button type="submit" id='updatebutton' onclick="updateweeklydata();" style="margin-left: 0%;display:none;" class="btn-lg btn-info active">
                                            UPDATE
                                        </button>
                                    
                                        
                                    </div>
                                    
                                </div>
                                        </td></tr>
                                        
                                </table>
                            </form>
                        </div>
                        <!--/panel content-->
                    </div>
                    <!--/panel-->

                              
                              <!--Data entry code-->
                            
                            </div>
                            <div class="tab-pane well" id="reports">
                                
                                
                               <!--Dashboard code-->
                            
                               
                               
                               
                                                   <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4>Dashboard</h4></div>
                        <div class="panel-body">
                            <form id="reportsform">
<table class='table table-striped table-bordered' id="reportstable" >
    
                            </table>
                            </form>
                        </div>
                        <!--/panel-body-->
                    </div>
                    <!--/panel-->

                               
                              
                              <!--Reports entry code-->
                            
                            
                            </div>
                           
                            
                            <div class="tab-pane  well" id="searchdata">
                                 <button id="btnDeleteRow" value="cancel">Delete selected Row</button>
                                <div id="searchtablediv">
                                  
                                </div> 
                                 
                               <!--- A page to show the patients who have been updated so far---->
                            </div>
                            <div class="tab-pane active well" id="searchpatients">
                                 
                                <div id="searchpatientstablediv">
                                  
                                </div>    
                               <!--- Patients---->
                            </div>
                            
                            
                            </div>
                        </div>

                    </div>
                    <!--/tabs-->

                </div>
                <!--/col-->
               
                <!--/col-span-6-->

            </div>
            <!--/row-->

           


            
        </div>
        <!--/col-span-9-->
    </div>

<!-- /Main -->

<footer class="text-center"> &copy; Stf System </footer>

<div class="modal" id="addWidgetModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" id="refr1" aria-hidden="true">×</button>
                <h4 class="modal-title">Data Export</h4>
            </div>
            <div class="modal-body">
                <form id="exportdataform">
                   
              <button class=" btn-lg btn-success" style="text-align: center;" id="exportbutton" onclick="importdata();"> Export Data</button>
              
              &nbsp;&nbsp;
             
              
              
              <button class=" btn-lg btn-info" style="display:none;text-align: center;"  id="exportmsg" > Exporting Data..</button>
              <p id="exportresponse"> </p>
              </form>
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn" id="refr">Close</a>
              
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dalog -->
</div>
<!-- /.modal -->



<!-------------------------Re export all Data------------------------------->


<div class="modal" id="addWidgetModalreexport">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" id="refr2" aria-hidden="true">×</button>
                <h4 class="modal-title">Data Re-Export</h4>
            </div>
            <div class="modal-body">
                <form id="exportdataform2">
                   
              <button class=" btn-lg btn-success" style="text-align: center;" id="exportbutton2" onclick="exportalldata();">Click here to Re-export all Data</button>
              
              &nbsp;&nbsp;
             
              
              
              <button class=" btn-lg btn-info" style="display:none;text-align: center;"  id="exportmsg2" > Exporting Data..</button>
              <p id="exportresponse2"> </p>
              </form>
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn" id="refr">Close</a>
              
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dalog -->
</div>


<!-------------------------Re export all Data------------------------------->




<div class="modal" id="accesscodemodal" >
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" >
                <button type="button" id="savecodebtn" class="close" data-dismiss="modal" aria-hidden="true">.</button>
                <h4 class="modal-title">Account Details</h4>
                <label style="color:red;" id="useraccountvalidation"></label>
            </div>
            <div class="modal-body">
                <form action="#" class="userform" method="post">
                 <div class="control-group">
                                    <label><font color="red"><b>*</b></font>  Enter STF access code</label>
                                    <div class="controls">
                                        <input type="password" size="14" placeholder=""   required name="accesscode" id="accesscode" class="form-control" >
                                    </div>
                                </div> 
                    
                       
                    
                                <div class="control-group">
                                    <label></label>
                                    <div class="controls">
                                        <label onclick=" updateaccount();"    style="margin-left: 50%;"  class="btn-lg btn-success active">
                                            Login
                                        </label>
                                    </div>
                                </div>   
                    
                </form>
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn">.</a>
              
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dalog -->
</div>










<div class="modal" id="datasavedmodal" >
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" >
                <button type="button"  class="close" data-dismiss="modal" aria-hidden="true">x</button>
                <h4 class="modal-title" id="datasavedmsg"> <font color="green"><b> Data saved successfully!</b></font></h4>
                <label style="color:red;" ></label>
            </div>
            <div class="modal-body">
                <form action="#"  method="post">
                 <div class="control-group">
                                    <label><font color="green"><b> </b></font> </label>
                                    
                                    <div class="controls">
                                       
                                    </div>
                                </div> 
                    
                                <div class="control-group">
                                    <label></label>
                                    <div class="controls">
                                        <label     style="margin-left: 50%;" data-dismiss="modal" class="btn-lg btn-success active">
                                            x
                                        </label>
                                    </div>
                                </div>   
                    
                </form>
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn">close</a>
              
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dalog -->
</div>

<!------------------------------------>



<div class="modal" id="userdetails" >
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" >
                <button type="button" id="saveuserbtn" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">User Details</h4>
                <label style="color:red;" id="uservalidation"></label>
            </div>
            <div class="modal-body">
                <form action="#" class="userform" method="post">
                 <div class="control-group">
                                    <label><font color="red"><b>*</b></font>  Your Name</label>
                                    <div class="controls">
                                        <select onchange="appenduserdetails();"   placeholder="eg MJohn@fhi360.org"   required name="username" id="username" class="form-control" >
                                            <option value=''>No activated users</option>
                                        </select>
                                    </div>
                                </div> 
                    
                       <div class="control-group">
                                    <label> <font color="red"><b>*</b></font>  Facility Supporting</label>
                                    <div class="controls">
                                        <select onclick="showfacilities();"  onchange="" multiple=""  name="facilityname" id="facilityname" class="form-control" >
                                            <option value="refresh">loading facilities..</option>
                                           
                                        </select>
                                    </div>
                      </div>
                    
                    <div class="control-group">
                                    <label><font color="red"><b>*</b></font>  supervisor(s) Email</label>
                                    <div class="controls">
                                        <input title="Enter comma separated list of supervisor/To's/M&E officer's email.They will be notified when you export your data." type="text" size="34" placeholder="eg MJohn@fhi360.org,JNdoe@fhi360"   required name="supervisormail" id="supervisormail" class="form-control" >
                                    </div>
                                </div> 
                    
                                <div class="control-group">
                                    <label></label>
                                    <div class="controls">
                                        <label onclick=" updateuser();" data-dismiss="modal"   style="margin-left: 50%;"  class="btn-lg btn-success active">
                                            SAVE
                                        </label>
                                    </div>
                                </div>   
                    
                </form>
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn">Close</a>
              
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dalog -->
</div>





<div class="modal" id="help">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">Help</h4>
            </div>
            <div class="modal-body">
                <p>This  application is created for aiding users in collecting data for the STF. One is expected to update outcome details .</p>
                <h3>Indicators</h3>
                <p>The specific indicators that one should enter data for are;</p>
                <ul>




                </ul>
             <h3>Loading CCC Number</h3>
                 <p> The first time of installing/running the application,CCC numbers are downloaded and saved on the host device (mobile phone or computer browser). This requires internet connectivity. After the download, sites should appear on the facility drop down list.</p>
                 <h3>Data Export</h3>
                <p>Data is saved on your  device and should be shared to a server for analysis </p>
                <p>If there is Any un-exported that has  been saved offline, the user will be reminded to create an export by seeing yellow text showing number of sites whose data has not been exported .</p>
           
            <h3>Reset CCC records</h3>
            <p>To clear existing new ccc numbers and request for new ones, click the RESET button  </p>
            <button onclick=" resetcccdb();" id="resetdbbtn" style="margin-left: 30%;" class="btn-lg btn-info active">
                                            Reset
                                        </button>
            
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn">Close</a>
               
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dalog -->
</div>

<div class="modal" id="summarybtn">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">Live EAC Cascade (realtime)</h4>
            </div>
            <div class="modal-body">
                <p><b>This  is a summary of the EAC Cascade</b></p>
                <table id="eac" class="table table-hover table-bordered" >
             
               </table>
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn">Close</a>
               
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dalog -->
</div>







<div class="modal" id="newuser" >
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" >
                <button type="button" id="saveuserbtn" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">New Details</h4>
                <label style="color:red;" id="uservalidation"></label>
            </div>
            <div class="modal-body">
                <form action="#" class="userform" method="post">
                 <div class="control-group">
                                    <label><font color="red"><b>*</b></font>First Name</label>
                                    <div class="controls">
                                        <input    placeholder="eg John"   required name="fname" id="fname" class="form-control" >
                                      
                                    </div>
                                </div> 
                    
                     <div class="control-group">
                                    <label><font color="red"><b>*</b></font>Last Name</label>
                                    <div class="controls">
                                        <input    placeholder="eg Smith"   required name="lname" id="lname" class="form-control" >
                                      
                                    </div>
                                </div> 
                    
                      <div class="control-group">
                                    <label><font color="red"><b>*</b></font>Phone Number</label>
                                    <div class="controls">
                                        <input    placeholder="eg 0712 345 678"   required name="phone" id="phone" class="form-control" >
                                      
                                    </div>
                                </div> 
                    
                     <div class="control-group">
                                    <label><font color="red"><b>*</b></font>Email</label>
                                    <div class="controls">
                                        <input    placeholder="eg johnsmith@gmail.com"   required name="mail_user" id="mail_user" class="form-control" >
                                      
                                    </div>
                    </div> 
                    
                    
                     <div class="control-group">
                                    <label><font color="red"><b>*</b></font>Facility</label>
                                    <div class="controls">
                                        <select      required name="user_facility" id="user_facility" class="form-control" >
                                            <option value=''>Select Facility</option>
                                      </select>
                                    </div>
                    </div> 
                    
                    
                       <div class="control-group">
                                    <label> <font color="red"><b>*</b></font>  Facility Supporting</label>
                                    <div class="controls">
                                        <select   onchange="" multiple=""  name="user_facility" id="user_facility" class="form-control" >
                                            <option value="refresh">loading facilities..</option>
                                           
                                        </select>
                                    </div>
                      </div>
                    
                    <div class="control-group">
                                    <label><font color="red"><b>*</b></font> Technical Officer Email</label>
                                    <div class="controls">
                                        <input title="Enter email adress of To's officer's email. They will be notified when you export your data." type="text" size="34" placeholder="eg MJohn@fhi360.org"   required name="mail_supervisor" id="mail_supervisor" class="form-control" >
                                    </div>
                                </div> 
                    
                                <div class="control-group">
                                    <label></label>
                                    <div class="controls">
                                        <label onclick=" updateremoteuser();" data-dismiss="modal"   style="margin-left: 50%;"  class="btn-lg btn-success active">
                                            SAVE
                                        </label>
                                    </div>
                                </div>   
                    
                </form>
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn">Close</a>
              
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dalog -->
</div>







<div class="modal" id="clearsyncbtn">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">Reset CCC records</h4>
            </div>
            <div class="modal-body">
    
            <p>To clear existing new ccc numbers , click the RESET button  </p>
            <button onclick=" resetcccdb();" id="resetdbbtn" style="margin-left: 30%;" class="btn-lg btn-info active">
                                            Reset
                                        </button>
            
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn">Close</a>
               
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dalog -->
</div>







	<!-- script references -->
                <script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.js"></script>
		
                <script src="js/bootstrap-datepicker.min.js"></script>
                <script src="js/select2.min.js"></script>               
                <script src="js/pouchdb-7.2.1.js"></script>
                <script src="js/pouchdb.upsert.js"></script>
                <script type="text/javascript" src="js/jquery.fileDownload.js"></script>
                <script type="text/javascript" src="js/datatables.min.js"></script>
                <script type="text/javascript" src="js/angular.js"></script>
                 <script type="text/javascript" src="js/angular_options.js"></script>
                 <script type="text/javascript" src="js/masterstf.js"></script>
                 <script type="text/javascript" src="js/pouchdb_options.js"></script>
                
               
              <script type="text/javascript">        
               
               
    
   var hostname="";

 //var hostname="http://localhost";

            
  $(document).ready(function(){
      
          
  $('.dates').datepicker({
                             todayHighlight: true, clearBtn: true, autoclose: true,format: "yyyy-mm-dd",
     });
      
  $('facilityname').select2();  
  $('#rowid').val("");  
  
  });   
  
//a function to load facilities data from the 

getFacilitiesJson();
    

getvldata();


setvldata();

//a function that loads ccc numbers infor


var dbdata="";

//load list of updated data into the patients search table 
 selectsearchdata();

//show the number of unexported records
unsynceddata();



//show already entered vl data
totalvldata();


isloggedin();

selectwidth100();

//confirm delete data

reasonnoteligible();


getmonth();


fichua();


ficha1();


//toggle the third line options

ficha3();


//load Regimen list

getdrugs();


getuserslist();


activateusers();


autoexport();

//Register service worker

    if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('serviceworker.js').then(function(registration) {
      // Registration was successful
      console.log('STF_ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
      // registration failed :(
      console.log('ServiceWorker registration failed: ', err);
    });
  });
}




</script>

	</body>
</html>
